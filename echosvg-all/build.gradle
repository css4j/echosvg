plugins {
	id 'echosvg.java-conventions'
}

dependencies {
	api project(':echosvg-script')
	api project(':echosvg-ext')
	api project(':echosvg-extension')
	api project(':echosvg-gui-util')
	api project(':echosvg-swing')
	api project(':echosvg-slideshow')
	api project(':echosvg-svgpp')
	api project(':echosvg-ttf2svg')
	api project(':echosvg-svgrasterizer')
	api project(':svgom-api')
}

description = 'io.sf.carte:echosvg-all'

publishing.publications.maven(MavenPublication).pom {
	description = "EchoSVG aggregate artifact"
}

//create a single Jar with all dependencies
tasks.register('uberjar', Jar) {
	archiveClassifier = "alldeps"
	from sourceSets.main.output
	dependsOn configurations.compileClasspath
	dependsOn configurations.runtimeClasspath
	from {
		configurations.compileClasspath.collect { it.isDirectory() ? it : zipTree(it) }
	}
	from {
		configurations.runtimeClasspath.findAll { it.name.endsWith('jar') }.collect { zipTree(it) }
	}
	with jar
	duplicatesStrategy = 'exclude'
	exclude 'javax/**'
	exclude 'org/w3c/css/**'
}
